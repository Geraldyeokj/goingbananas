<% layout("layouts/boilerplate") %>

<div class="position-relative overflow-hidden text-center bg-light">
    <div class="col-md-6 p-lg-5 mx-auto my-4">
    <h1 class="display-4 fw-normal">GoingBananas</h1>
    <p class="lead fw-normal">The banana-ripeness detector you never knew you needed</p>
    <!-- <a class="btn btn-outline-secondary" href="#">Coming soon</a> -->
    </div>
    <!-- <div class="product-device shadow-sm d-none d-md-block"></div>
    <div class="product-device product-device-2 shadow-sm d-none d-md-block"></div> -->
</div>

<% if(currentUser) {%>
    <div class="d-flex w-100">
        <div class="bg-dark flex-fill text-center text-white overflow-hidden">
            <div class="my-3 py-3">
            <h2 class="display-5">Bananatest</h2>
            <p class="lead">Wondering if a banana is ripe? Send us a picture and find out!</p>
            </div>
            <a href="/bananatest" class="bg-warning text-dark mx-auto mb-5 btn btn-primary shadow-none btn-lg" style="border: none; box-shadow: none;">
                BananaTest
            </a>
        </div>
        <div class="bg-dark flex-fill text-center text-white overflow-hidden">
            <div class="my-3 p-3">
            <h2 class="display-5">Test History</h2>
            <p class="lead">Reminisce about all the bananas you've tested and eaten.</p>
            </div>

            <a href="/posts" class="bg-warning text-dark mx-auto mb-5 btn btn-primary shadow-none btn-lg" style="border: none; box-shadow: none;">
                Your Tests
            </a>
            
        </div>
    </div>

    <div class="d-flex w-100">
        <div class="bg-light flex-fill text-center overflow-hidden">
            <div class="my-3 py-3">
                <h2 class="display-5">Where ripe bananas have been found near you</h2>
            </div>
            <div id='map' class="mx-auto mb-5" style='width: 80%; height: 500px; border-radius: 21px 21px 21px 21px;'></div>
        </div>
    </div>
<% } else { %>
    <div class="d-flex w-100">
        <div class="bg-dark flex-fill text-center text-white overflow-hidden">
            <div class="my-3 py-3">
            <h2 class="display-5">Register</h2>
            <p class="lead">New Here? Register Below to make a Bananatest!</p>
            </div>
            <a href="/register" class="bg-warning text-dark mx-auto mb-5 btn btn-primary shadow-none btn-lg" style="border: none; box-shadow: none;">
                Register
            </a>
        </div>
        <div class="bg-dark flex-fill text-center text-white overflow-hidden">
            <div class="my-3 p-3">
            <h2 class="display-5">Login</h2>
            <p class="lead">Already have an account? Login to resume Nanner testing.</p>
            </div>

            <a href="/login" class="bg-warning text-dark mx-auto mb-5 btn btn-primary shadow-none btn-lg" style="border: none; box-shadow: none;">
                Login
            </a>
            
        </div>
    </div>

    <div class="d-flex w-100">
        <div class="bg-light flex-fill text-center overflow-hidden">
            <div class="my-3 py-3">
                <h2 class="display-5">Where ripe bananas have been found near you</h2>
            </div>
            <div id='map' class="mx-auto mb-5" style='width: 80%; height: 500px; border-radius: 21px 21px 21px 21px;'></div>
        </div>
    </div>
<% } %>

<script>
    const geobanana = { features: <%- JSON.stringify(bananadataset) %>}
</script>

<script src='/javascripts/mapScript.js' long="<%= latlong[1] %>" lat="<%= latlong[0] %>" ripenessFilter=" ripe"></script>